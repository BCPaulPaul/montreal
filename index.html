<!DOCTYPE html>
<html>
<head>
    <title>Montreal Map Markers</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDZmQ7dDmii8uuDNwWWXKXWyeJsQsZ3JmY&callback=initMap" async defer></script>
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        let map;
        let geocoder;
        let bounds;

        async function initMap() {
            const montreal = { lat: 45.508888, lng: -73.561668 }; // Coordinates of Montreal
            const mapOptions = {
                center: montreal,
                zoom: 12/*,
                styles: [{                   // Style rules to hide default POIs
                    featureType: "poi",
                    elementType: "all",
                    stylers: [{ visibility: "off" }]
                }]*/
            };
            map = new google.maps.Map(document.getElementById('map'), mapOptions);
            geocoder = new google.maps.Geocoder();
            bounds = new google.maps.LatLngBounds();
            bounds.extend(montreal); // Extend bounds to include Montreal

            const locations = [
                "Place des Arts, Montreal",
                "Mont Royal, Montreal",
                "Notre-Dame Basilica, Montreal"
            ];

            await Promise.all(locations.map(location => geocodeAddress(location)));
            map.fitBounds(bounds, { top: 50, right: 50, bottom: 50, left: 50 }); // Optionally add padding
        }

        async function geocodeAddress(location) {
            try {
                const response = await geocoder.geocode({ 'address': location });
                if (response.results && response.results.length > 0 && response.status === 'OK') {
                    const pos = response.results[0].geometry.location;
                    addMarker(pos, location);
                    bounds.extend(pos); // Extend the bounds to include this location
                } else {
                    console.error('Geocoding error for ' + location + ': ' + response.status);
                }
            } catch (error) {
                console.error('Geocoding exception for ' + location + ': ', error);
            }
        }

        function addMarker(position, title) {
            const marker = new google.maps.Marker({
                map: map,
                position: position,
                title: title
            });

            const infoWindow = new google.maps.InfoWindow({
                content: `<div><strong>${title}</strong></div>`
            });

            marker.addListener('click', () => {
                infoWindow.open(map, marker);
            });
        }
    </script>
</body>
</html>
